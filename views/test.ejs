<!DOCTYPE html>
<html lang="ja">

<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title><%= title %></title>
        <link rel="stylesheet" href="/bootstrap/bootstrap.min.css">
        <link href="bootstrap/form-validation.css" rel="stylesheet">
        <link rel="stylesheet" href="/bootstrap/bootstrap.min.css">
        <link href="bootstrap/css" rel="stylesheet">
        <link href="bootstrap/pricing.css" rel="stylesheet">
        <link href="bootstrap/example.css" rel="stylesheet">
</head>



<div class="d-flex flex-column flex-md-row align-items-center p-3 px-md-4 mb-3 bg-white border-bottom shadow-sm">
    <!-- <h5 class="my-0 mr-md-auto font-weight-normal">Company name</h5> -->
    <h5 class="my-0 mr-md-auto font-weight-normal">困った人マップ</h5>
    <nav class="my-2 my-md-0 mr-md-3">
      <!-- <a class="p-2 text-dark" href="#">Features</a> -->
      <a class="p-2 text-success" href="/signin">signin</a>
      <!-- <a class="p-2 text-dark" href="#">Enterprise</a> -->
      <a class="p-2 text-danger" href="/logout">logout</a>
  
      <!-- <a class="btn btn-outline-primary" href="#">Sign up</a> -->
      <a class="p-2 text" href="/signup">signup</a>
    </nav>
  </div>

<body>
    <%- include('./error_messages'); %>
        <% if(isAuth) { %>
            <div class="container">
                <div class="row">
                    <div class="col-md-6">
                        <form action="/test" method="post">
                            分類:
                            <select name="classification" required>
                                <option value="力仕事">力仕事</option>
                                <option value="軽作業">軽作業</option>
                                <option value="物探し">物探し</option>
                                <option value="道案内">道案内</option>
                                <option value="その他">その他</option>
                            </select>

                            内容:
                            <input type="text" id="content" name="contents" required />
                            <input type="hidden" id="mylat" name="mylat" />
                            <input type="hidden" id="mylng" name="mylng" />
                            <input type="submit" class="btn btn-primary" value="送信" />
                        </form>
                    </div>
                    <div class="row">
                        あなたの投稿した困りごと
                        <ul>
                            <% for(let todo of todos){ %>
                                <li><span>
                                        <form action="/solvedform" method="post">
                                            <%= todo.content %>
                                                <input type="hidden" value="<%= todo.id %>" id="taskid">
                                                <input type="submit" value="解決" />
                                        </form>
                                    </span></li>

                                <% } %>
                        </ul>
                        <a href="/helpuser">助ける人用ページはこちら</a>
                        <a href="/logout">ログアウト</a>
                    </div>
                </div>
                <% } else { %>
                    <h1>困った人マップにようこそ</h1>
                    <a href="/signin">ログインしてください</a>
                    <a href="/signup">アカウント登録はこちら</a>
                    <% } %>
</body>








<script>
    navigator.geolocation.getCurrentPosition(successCallback, errorCallback);
    function successCallback(position) {
        // 緯度を取得し画面に表示
        latitude = position.coords.latitude;
        // 経度を取得し画面に表示
        longitude = position.coords.longitude;
        document.getElementById("mylat").value = latitude; https:
        document.getElementById("mylng").value = longitude;
    };
    // 取得に失敗した場合の処理
    function errorCallback(error) {
        console.log(error)
        alert("位置情報が取得できませんでした");
    };
</script>

<script src="./bootstrap/holder.min.js.ダウンロード"></script>
  <script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (function () {
      'use strict';

      window.addEventListener('load', function () {
        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.getElementsByClassName('needs-validation');

        // Loop over them and prevent submission
        var validation = Array.prototype.filter.call(forms, function (form) {
          form.addEventListener('submit', function (event) {
            if (form.checkValidity() === false) {
              event.preventDefault();
              event.stopPropagation();
            }
            form.classList.add('was-validated');
          }, false);
        });
      }, false);
    })();
  </script>

  <script src="./bootstrap/jquery-3.3.1.slim.min.js.ダウンロード"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script>
    window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')
  </script>
  <script src="./bootstrap/bootstrap.bundle.min.js.ダウンロード"></script>
  <script src="./bootstrap/anchor.min.js.ダウンロード"></script>
  <script src="./bootstrap/clipboard.min.js.ダウンロード"></script>
  <script src="./bootstrap/bs-custom-file-input.min.js.ダウンロード"></script>
  <script src="./bootstrap/application.js.ダウンロード"></script>
  <script src="./bootstrap/search.js.ダウンロード"></script>
  <script src="./bootstrap/ie-emulation-modes-warning.js.ダウンロード"></script>

  <script src="./bootstrap/jquery-3.4.1.slim.min.js.ダウンロード"
    integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
    crossorigin="anonymous"></script>
  <script>
    window.jQuery || document.write('<script src="/docs/4.4/assets/js/vendor/jquery-slim.min.js"><\/script>')
  </script>
  <script src="./bootstrap/bootstrap.bundle.min.js.ダウンロード"></script>
  <script src="./bootstrap/anchor.min.js.ダウンロード"></script>
  <script src="./bootstrap/clipboard.min.js.ダウンロード"></script>
  <script src="./bootstrap/bs-custom-file-input.min.js.ダウンロード"></script>
  <script src="./bootstrap/application.js.ダウンロード"></script>
  <script src="./bootstrap/search.js.ダウンロード"></script>
  <script src="./bootstrap/ie-emulation-modes-warning.js.ダウンロード"></script>

</html>